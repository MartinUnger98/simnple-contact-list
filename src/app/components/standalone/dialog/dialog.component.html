<p-dialog
  [modal]="true"
  draggable="false"
  [style]="{ width: '30rem' }"
  [(visible)]="visible"
  (onHide)="closeDialog()"
  header="Add contact"
>
  <div class="flexStandardColumn">
    <p-avatar
      icon="pi pi-user"
      size="xlarge"
      shape="circle"
    />

    <form
      [formGroup]="createContactForm"
      (ngSubmit)="onSubmit()"
    >
      <app-input-field
        type="text"
        formControlName="firstname"
        placeholder="Firstname"
        name="firstname"
        autocomplete="firstname"
        iconClass="pi pi-user"
        [errorMessage]="
          f['firstname'].touched && f['firstname'].invalid ? 'Firstame is required' : ''
        "
      ></app-input-field>
      <app-input-field
        type="text"
        formControlName="lastname"
        placeholder="Lastname"
        name="lastname"
        autocomplete="lastname"
        iconClass="pi pi-user"
        [errorMessage]="
          f['lastname'].touched && f['lastname'].invalid ? 'lastname is required' : ''
        "
      ></app-input-field>
      <app-input-field
        type="email"
        formControlName="email"
        placeholder="Email"
        name="email"
        iconClass="pi pi-envelope"
        [errorMessage]="f['email'].touched && f['email'].invalid
            ? f['email'].errors?.['required']
              ? 'Email is required'
              : 'Invalid email'
            : ''"
      ></app-input-field>
      <app-input-field
        type="tel"
        formControlName="phone"
        placeholder="Telefon"
        name="phone"
        iconClass="pi pi-phone"
        pattern="^\+?[0-9]{8,}$"
        [errorMessage]="f['phone'].touched && f['phone'].invalid
            ? f['phone'].errors?.['required']
              ? 'Phonenumber is required'
              : 'Invalid phonenumber'
            : ''"
      ></app-input-field>
      <app-input-field
        type="text"
        formControlName="address"
        placeholder="Address"
        name="address"
        autocomplete="address"
        iconClass="pi pi-map"
        [errorMessage]="
          f['address'].touched && f['address'].invalid ? 'Address is required' : ''
        "
      ></app-input-field>
      <div class="flex gap-8 mt-4">
        <p-button
          label="Cancel"
          (click)="closeDialog()"
          severity="secondary"
          icon="pi pi-times"
          iconPos="right"
        />
        <p-button
          type="submit"
          label="Create Contact"
          severity="primary"
          [disabled]="createContactForm.invalid"
          icon="pi pi-check"
          iconPos="right"
        />
        <p-progressSpinner
          *ngIf="isLoading"
          styleClass="custom-spinner"
          strokeWidth="3"
          fill="var(--surface-ground)"
          animationDuration="1s"
        />
      </div>
    </form>
  </div>
</p-dialog>
<p-toast />
